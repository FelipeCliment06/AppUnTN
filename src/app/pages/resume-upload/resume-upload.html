<div class="upload-wrapper">
  <div class="upload-container">
    <h2 class="text-center mb-4">¡Subí tu resumen!</h2>

    <form 
      (ngSubmit)="uploadResume()" 
      enctype="multipart/form-data" 
      class="upload-form"
    >
      <div class="form-group">
        <label for="titulo" class="form-label">Título</label>
        <input type="text" class="form-control" id="titulo" name="title" [(ngModel)]="title" required />
      </div>

      <div class="form-group">
        <label for="descripcion" class="form-label">Descripción</label>
        <textarea class="form-control" id="descripcion" name="description" rows="3" [(ngModel)]="description" required></textarea>
      </div>

      <div class="form-group">
        <label for="universidad" class="form-label">Universidad</label>
        <select class="form-select" id="universidad" name="universidad" [(ngModel)]="selectedUniversityId" (change)="onUniversityChange()" required>
          <option [ngValue]="null">Seleccioná una universidad</option>
          @for (u of allUniversities; track u.id) {
            <option [value]="u.id">{{ u.name }}</option>
          }
        </select>
      </div>

      <div class="form-group">
        <label for="carrera" class="form-label">Carrera</label>
        <select class="form-select" id="carrera" name="carrera" [(ngModel)]="selectedCareerId" (change)="onCareerChange()" [disabled]="!selectedUniversityId" required>
          <option [ngValue]="null">Seleccioná una carrera</option>
          @for (c of filteredCareers; track c.id) {
            <option [value]="c.id">{{ c.name }}</option>
          }
        </select>
      </div>

      <div class="form-group">
        <label for="materia" class="form-label">Materia</label>
        <select class="form-select" id="materia" name="subject" [(ngModel)]="subject" [disabled]="!selectedCareerId" required>
          <option value="">Seleccioná una materia</option>
          @for (m of filteredSubjects; track m.id) {
            <option [value]="m.name">{{ m.name }}</option>
          }
        </select>
      </div>

      <div class="form-group mt-3">
        <label for="archivo" class="form-label">Archivo (.pdf, .docx, .txt)</label>
        <input class="form-control" type="file" id="archivo" name="file" accept=".pdf,.docx,.doc,.txt" (change)="onFileSelected($event)" required />
      </div>

      <div class="btn-container text-center mt-4">
        <button type="submit" class="btn btn-primary">Subir resumen</button>
      </div>
    </form>

    @if (successMessage) {
      <div class="alert alert-success mt-3">
        {{ successMessage }}
      </div>
    }

    @if (errorMessage) {
      <div class="alert alert-danger mt-3">
        {{ errorMessage }}
      </div>
    }
  </div>
</div>