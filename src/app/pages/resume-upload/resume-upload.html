<div class="upload-wrapper">
  <div class="upload-container">
    <h2>Subir resumen</h2>
    <p class="upload-subtitle">Compart칤 tu material con la comunidad universitaria</p>

    <form
      (ngSubmit)="uploadResume()"
      enctype="multipart/form-data"
      class="upload-form"
    >
      <div class="form-group">
        <label for="titulo" class="form-label">T칤tulo</label>
        <input type="text" class="form-control" id="titulo" name="title" [(ngModel)]="title" placeholder="Ej: Resumen de Matem치tica I - Parcial 1" required />
      </div>

      <div class="form-group">
        <label for="descripcion" class="form-label">Descripci칩n</label>
        <textarea class="form-control" id="descripcion" name="description" rows="3" [(ngModel)]="description" placeholder="Describ칤 brevemente el contenido del resumen..." required></textarea>
      </div>

      <div class="form-group">
        <label for="universidad" class="form-label">Universidad</label>
        <select class="form-select" id="universidad" name="universidad" [(ngModel)]="selectedUniversityId" (change)="onUniversityChange()" required>
          <option [ngValue]="null">Seleccion치 una universidad</option>
          @for (u of allUniversities; track u.id) {
            <option [value]="u.id">{{ u.name }}</option>
          }
        </select>
      </div>

      <div class="form-group">
        <label for="carrera" class="form-label">Carrera</label>
        <select class="form-select" id="carrera" name="carrera" [(ngModel)]="selectedCareerId" (change)="onCareerChange()" [disabled]="!selectedUniversityId" required>
          <option [ngValue]="null">Seleccion치 una carrera</option>
          @for (c of filteredCareers; track c.id) {
            <option [value]="c.id">{{ c.name }}</option>
          }
        </select>
      </div>

      <div class="form-group">
        <label for="materia" class="form-label">Materia</label>
        <select class="form-select" id="materia" name="subject" [(ngModel)]="subject" [disabled]="!selectedCareerId" required>
          <option value="">Seleccion치 una materia</option>
          @for (m of filteredSubjects; track m.id) {
            <option [value]="m.name">{{ m.name }}</option>
          }
        </select>
      </div>

      <hr class="form-separator" />

      <div class="file-upload-area">
        <label class="form-label">Archivo (.pdf, .docx, .txt)</label>
        <div
          class="file-drop-zone"
          [class.has-file]="selectedFile"
          (click)="fileInput.click()"
        >
          <span class="file-drop-icon">游늯</span>
          <span class="file-drop-text">
            <strong>Hac칠 click</strong> para seleccionar un archivo
          </span>
          @if (selectedFile) {
            <span class="file-name">{{ selectedFile.name }}</span>
          }
        </div>
        <input
          #fileInput
          class="file-hidden-input"
          type="file"
          id="archivo"
          name="file"
          accept=".pdf,.docx,.doc,.txt"
          (change)="onFileSelected($event)"
          required
        />
      </div>

      <div class="btn-container">
        <button type="submit" class="btn-submit">Subir resumen</button>
      </div>
    </form>

    @if (successMessage) {
      <div class="alert alert-success">
        {{ successMessage }}
      </div>
    }

    @if (errorMessage) {
      <div class="alert alert-danger">
        {{ errorMessage }}
      </div>
    }
  </div>
</div>
