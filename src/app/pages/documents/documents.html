<div class="container">
  <h2 class="mb-4 fw-bold">Explorar res√∫menes</h2>

  <div class="filter-row">
    <div>
      <label class="form-label mb-1">Materia:</label>
      <select class="form-select" [(ngModel)]="materia" (change)="filtrar()">
        <option value="">Seleccionar materia...</option>
        @for (m of materias; track m) {
          <option [value]="m">{{ m }}</option>
        }
      </select>
    </div>

    <div>
      <label class="form-label mb-1">Nombre del resumen:</label>
      <input class="form-control" placeholder="Ej: Base de datos..." [(ngModel)]="nombre" (input)="filtrar()">
    </div>

    <div>
      <label class="form-label mb-1">Autor:</label>
      <input class="form-control" placeholder="Ej: Juan P√©rez" [(ngModel)]="autor" (input)="filtrar()">
    </div>
  </div>

  @if (!materia && !nombre && !autor) {
    <p class="no-results">Us√° los filtros para buscar res√∫menes üîç</p>
  } @else if (filtrados.length === 0) {
    <p class="no-results">No se encontraron res√∫menes con los filtros aplicados üîç</p>
  }

  @for (doc of filtrados; track doc.id) {
    <div class="doc-card">
      <a class="doc-card-link" (click)="seleccionarDocumento(doc.id)">
        <strong>{{ doc.title }}</strong>
        <p>{{ doc.description }}</p>
        <div class="subject">{{ doc.subject }}</div>
      </a>
      <div class="doc-card-author">
        <a [routerLink]="['/user-profile', doc.authorUsername]" class="author-link" (click)="$event.stopPropagation()">
          <span class="author-avatar-sm">{{ (doc.authorUsername || '?').charAt(0).toUpperCase() }}</span>
          {{ doc.authorUsername || 'Autor desconocido' }}
        </a>
      </div>
    </div>
  }
</div>
